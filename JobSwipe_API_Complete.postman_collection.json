{
  "info": {
    "name": "JobSwipe API - Complete Collection",
    "description": "Comprehensive Postman collection for JobSwipe enterprise job automation platform. Includes authentication, token exchange, health checks, and all API endpoints with enterprise security features.",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{ACCESS_TOKEN}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Auto-refresh token if expired",
          "const accessToken = pm.environment.get('ACCESS_TOKEN');",
          "const refreshToken = pm.environment.get('REFRESH_TOKEN');",
          "",
          "if (accessToken && refreshToken) {",
          "    const tokenData = JSON.parse(atob(accessToken.split('.')[1]));",
          "    const currentTime = Math.floor(Date.now() / 1000);",
          "    const bufferTime = 300; // 5 minutes buffer",
          "    ",
          "    if (tokenData.exp < (currentTime + bufferTime)) {",
          "        console.log('Token expiring soon, attempting refresh...');",
          "        pm.sendRequest({",
          "            url: pm.environment.get('API_BASE_URL') + '/api/v1/auth/token/refresh',",
          "            method: 'POST',",
          "            header: {",
          "                'Content-Type': 'application/json'",
          "            },",
          "            body: {",
          "                mode: 'raw',",
          "                raw: JSON.stringify({",
          "                    refreshToken: refreshToken,",
          "                    source: 'web'",
          "                })",
          "            }",
          "        }, function (err, res) {",
          "            if (err) {",
          "                console.log('Token refresh failed:', err);",
          "            } else if (res.code === 200) {",
          "                const responseData = res.json();",
          "                if (responseData.success && responseData.tokens) {",
          "                    pm.environment.set('ACCESS_TOKEN', responseData.tokens.accessToken);",
          "                    pm.environment.set('REFRESH_TOKEN', responseData.tokens.refreshToken);",
          "                    console.log('Token refreshed successfully');",
          "                }",
          "            }",
          "        });",
          "    }",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "API_BASE_URL",
      "value": "http://localhost:3001",
      "type": "string"
    },
    {
      "key": "WEB_BASE_URL", 
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "ACCESS_TOKEN",
      "value": "",
      "type": "string"
    },
    {
      "key": "REFRESH_TOKEN",
      "value": "",
      "type": "string"
    },
    {
      "key": "USER_ID",
      "value": "",
      "type": "string"
    },
    {
      "key": "EXCHANGE_TOKEN",
      "value": "",
      "type": "string"
    },
    {
      "key": "DEVICE_ID",
      "value": "550e8400-e29b-41d4-a716-446655440000",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üîê Authentication",
      "description": "Complete authentication flow with enterprise-grade security",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has user and tokens', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "    pm.expect(jsonData).to.have.property('tokens');",
                  "});",
                  "",
                  "// Save tokens for future requests",
                  "if (pm.response.code === 201) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.success && responseData.tokens) {",
                  "        pm.environment.set('ACCESS_TOKEN', responseData.tokens.accessToken);",
                  "        pm.environment.set('REFRESH_TOKEN', responseData.tokens.refreshToken);",
                  "        pm.environment.set('USER_ID', responseData.user.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"name\": \"John Doe\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"source\": \"web\",\n  \"termsAccepted\": true,\n  \"privacyAccepted\": true,\n  \"marketingConsent\": false,\n  \"timezone\": \"America/New_York\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/register",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register a new user with enterprise validation and security checks"
          }
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has authentication data', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "    pm.expect(jsonData).to.have.property('tokens');",
                  "    pm.expect(jsonData.tokens).to.have.property('accessToken');",
                  "    pm.expect(jsonData.tokens).to.have.property('refreshToken');",
                  "});",
                  "",
                  "// Save authentication data",
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.success && responseData.tokens) {",
                  "        pm.environment.set('ACCESS_TOKEN', responseData.tokens.accessToken);",
                  "        pm.environment.set('REFRESH_TOKEN', responseData.tokens.refreshToken);",
                  "        pm.environment.set('USER_ID', responseData.user.id);",
                  "        console.log('‚úÖ Authentication successful');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"source\": \"web\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/login",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Authenticate user with email/password and receive JWT tokens"
          }
        },
        {
          "name": "Get User Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has user profile', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "    pm.expect(jsonData.user).to.have.property('id');",
                  "    pm.expect(jsonData.user).to.have.property('email');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/profile",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "profile"]
            },
            "description": "Get current authenticated user profile information"
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has new tokens', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('tokens');",
                  "    pm.expect(jsonData.tokens).to.have.property('accessToken');",
                  "});",
                  "",
                  "// Update tokens",
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.success && responseData.tokens) {",
                  "        pm.environment.set('ACCESS_TOKEN', responseData.tokens.accessToken);",
                  "        if (responseData.tokens.refreshToken) {",
                  "            pm.environment.set('REFRESH_TOKEN', responseData.tokens.refreshToken);",
                  "        }",
                  "        console.log('‚úÖ Tokens refreshed successfully');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{REFRESH_TOKEN}}\",\n  \"source\": \"web\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/token/refresh",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "token", "refresh"]
            },
            "description": "Refresh access token using refresh token"
          }
        },
        {
          "name": "Change Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Password change successful', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"SecurePassword123!\",\n  \"newPassword\": \"NewSecurePassword123!\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/password/change",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "password", "change"]
            },
            "description": "Change user password with current password verification"
          }
        },
        {
          "name": "Request Password Reset",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Reset request processed', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"source\": \"web\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/password/reset",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "password", "reset"]
            },
            "description": "Request password reset email (always returns success for security)"
          }
        },
        {
          "name": "Logout User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Logout successful', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});",
                  "",
                  "// Clear stored tokens",
                  "pm.environment.unset('ACCESS_TOKEN');",
                  "pm.environment.unset('REFRESH_TOKEN');",
                  "pm.environment.unset('USER_ID');",
                  "console.log('‚úÖ Logged out and tokens cleared');"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/logout",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "logout"]
            },
            "description": "Logout user and invalidate session tokens"
          }
        }
      ]
    },
    {
      "name": "üîÑ Token Exchange (Desktop Auth)",
      "description": "Secure web-to-desktop authentication token exchange system",
      "item": [
        {
          "name": "Initiate Token Exchange",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Exchange token created', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('exchangeToken');",
                  "    pm.expect(jsonData).to.have.property('expiresAt');",
                  "    pm.expect(jsonData).to.have.property('instructions');",
                  "});",
                  "",
                  "// Save exchange token",
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.success && responseData.exchangeToken) {",
                  "        pm.environment.set('EXCHANGE_TOKEN', responseData.exchangeToken);",
                  "        console.log('‚úÖ Token exchange initiated');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deviceId\": \"{{DEVICE_ID}}\",\n  \"deviceName\": \"John's MacBook Pro\",\n  \"platform\": \"darwin\",\n  \"deviceType\": \"desktop\",\n  \"appVersion\": \"1.0.0\",\n  \"osVersion\": \"macOS 14.0\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/token-exchange/initiate",
              "host": ["{{API_BASE_URL}}"],
              "path": ["token-exchange", "initiate"]
            },
            "description": "Initiate secure token exchange for desktop authentication"
          }
        },
        {
          "name": "Complete Token Exchange",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Desktop token received', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('accessToken');",
                  "    pm.expect(jsonData).to.have.property('tokenType', 'Bearer');",
                  "    pm.expect(jsonData).to.have.property('expiresIn');",
                  "});",
                  "",
                  "// Save desktop token",
                  "if (pm.response.code === 200) {",
                  "    const responseData = pm.response.json();",
                  "    if (responseData.success && responseData.accessToken) {",
                  "        pm.environment.set('DESKTOP_TOKEN', responseData.accessToken);",
                  "        console.log('‚úÖ Desktop authentication completed');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"exchangeToken\": \"{{EXCHANGE_TOKEN}}\",\n  \"deviceId\": \"{{DEVICE_ID}}\",\n  \"deviceName\": \"John's MacBook Pro\",\n  \"platform\": \"darwin\",\n  \"deviceType\": \"desktop\",\n  \"appVersion\": \"1.0.0\",\n  \"osVersion\": \"macOS 14.0\",\n  \"systemInfo\": {\n    \"platform\": \"darwin\",\n    \"version\": \"14.0\",\n    \"arch\": \"x64\"\n  }\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/token-exchange/complete",
              "host": ["{{API_BASE_URL}}"],
              "path": ["token-exchange", "complete"]
            },
            "description": "Complete token exchange and receive desktop long-lived token"
          }
        },
        {
          "name": "Verify Exchange Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Exchange status received', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('valid');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/token-exchange/verify/{{EXCHANGE_TOKEN}}",
              "host": ["{{API_BASE_URL}}"],
              "path": ["token-exchange", "verify", "{{EXCHANGE_TOKEN}}"]
            },
            "description": "Verify token exchange status and get device information"
          }
        },
        {
          "name": "Cancel Token Exchange",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Exchange cancelled', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/token-exchange/{{EXCHANGE_TOKEN}}",
              "host": ["{{API_BASE_URL}}"],
              "path": ["token-exchange", "{{EXCHANGE_TOKEN}}"]
            },
            "description": "Cancel active token exchange session"
          }
        }
      ]
    },
    {
      "name": "üåê Web App Proxy Routes",
      "description": "Next.js web application proxy routes for seamless frontend integration",
      "item": [
        {
          "name": "Web Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Login successful with cookies', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"source\": \"web\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{WEB_BASE_URL}}/api/auth/login",
              "host": ["{{WEB_BASE_URL}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Web app login with HTTP-only cookie authentication"
          }
        },
        {
          "name": "Web Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Registration successful', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jane.smith@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"name\": \"Jane Smith\",\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"source\": \"web\",\n  \"termsAccepted\": true,\n  \"privacyAccepted\": true,\n  \"marketingConsent\": false\n}"
            },
            "url": {
              "raw": "{{WEB_BASE_URL}}/api/auth/register",
              "host": ["{{WEB_BASE_URL}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Web app registration with automatic cookie setup"
          }
        },
        {
          "name": "Web Get Current User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User data received', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{WEB_BASE_URL}}/api/auth/me",
              "host": ["{{WEB_BASE_URL}}"],
              "path": ["api", "auth", "me"]
            },
            "description": "Get current user via web app with cookie authentication"
          }
        },
        {
          "name": "Web Token Refresh",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Token refresh successful', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{WEB_BASE_URL}}/api/auth/refresh",
              "host": ["{{WEB_BASE_URL}}"],
              "path": ["api", "auth", "refresh"]
            },
            "description": "Refresh tokens via web app using HTTP-only cookies"
          }
        },
        {
          "name": "Web Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Logout successful', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{WEB_BASE_URL}}/api/auth/logout",
              "host": ["{{WEB_BASE_URL}}"],
              "path": ["api", "auth", "logout"]
            },
            "description": "Logout via web app and clear HTTP-only cookies"
          }
        }
      ]
    },
    {
      "name": "üè• Health & Monitoring",
      "description": "System health checks and monitoring endpoints",
      "item": [
        {
          "name": "Basic Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Health status is healthy', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status', 'healthy');",
                  "    pm.expect(jsonData).to.have.property('timestamp');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/health",
              "host": ["{{API_BASE_URL}}"],
              "path": ["health"]
            },
            "description": "Basic health check endpoint for load balancers"
          }
        },
        {
          "name": "Detailed Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Detailed health data present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData).to.have.property('database');",
                  "    pm.expect(jsonData).to.have.property('redis');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/health/detailed",
              "host": ["{{API_BASE_URL}}"],
              "path": ["health", "detailed"]
            },
            "description": "Detailed health check with database and Redis status"
          }
        },
        {
          "name": "Readiness Probe",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Service is ready', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('ready', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/ready",
              "host": ["{{API_BASE_URL}}"],
              "path": ["ready"]
            },
            "description": "Kubernetes readiness probe endpoint"
          }
        },
        {
          "name": "Liveness Probe",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Service is alive', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('alive', true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/live",
              "host": ["{{API_BASE_URL}}"],
              "path": ["live"]
            },
            "description": "Kubernetes liveness probe endpoint"
          }
        }
      ]
    },
    {
      "name": "üõ°Ô∏è Security & Monitoring",
      "description": "Security middleware statistics and monitoring",
      "item": [
        {
          "name": "Security Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Security stats present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('stats');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/security/stats",
              "host": ["{{API_BASE_URL}}"],
              "path": ["security", "stats"]
            },
            "description": "Get security middleware statistics and metrics"
          }
        }
      ]
    },
    {
      "name": "‚ö†Ô∏è Error Testing",
      "description": "Test error handling and edge cases",
      "item": [
        {
          "name": "Test Rate Limiting",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Rate limiting works', function () {",
                  "    // After multiple requests, should get 429",
                  "    pm.expect([200, 429]).to.include(pm.response.code);",
                  "});",
                  "",
                  "if (pm.response.code === 429) {",
                  "    pm.test('Rate limit headers present', function () {",
                  "        pm.expect(pm.response.headers.get('X-RateLimit-Limit')).to.exist;",
                  "        pm.expect(pm.response.headers.get('X-RateLimit-Remaining')).to.exist;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invalid@email.com\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/login",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Test rate limiting by making multiple failed login attempts"
          }
        },
        {
          "name": "Test Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Error response format', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', false);",
                  "    pm.expect(jsonData).to.have.property('error');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "invalid.token.here",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/profile",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "profile"]
            },
            "description": "Test invalid token handling"
          }
        },
        {
          "name": "Test Validation Errors",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Validation error response', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', false);",
                  "    pm.expect(jsonData).to.have.property('error');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invalid-email\",\n  \"password\": \"123\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/register",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Test input validation with invalid data"
          }
        }
      ]
    },
    {
      "name": "üß™ Test Sequences",
      "description": "Complete test sequences for end-to-end workflows",
      "item": [
        {
          "name": "Complete Auth Flow Test",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate unique test user",
                  "const timestamp = Date.now();",
                  "pm.environment.set('TEST_EMAIL', `test.user.${timestamp}@example.com`);",
                  "pm.environment.set('TEST_PASSWORD', 'TestPassword123!');",
                  "console.log('Testing with:', pm.environment.get('TEST_EMAIL'));"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{TEST_EMAIL}}\",\n  \"password\": \"{{TEST_PASSWORD}}\",\n  \"name\": \"Test User\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"source\": \"web\",\n  \"termsAccepted\": true,\n  \"privacyAccepted\": true,\n  \"marketingConsent\": false\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/api/v1/auth/register",
              "host": ["{{API_BASE_URL}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Test complete authentication flow from registration to logout"
          }
        },
        {
          "name": "Desktop Auth Flow Test",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure we have valid tokens",
                  "const accessToken = pm.environment.get('ACCESS_TOKEN');",
                  "if (!accessToken) {",
                  "    console.log('‚ùå No access token available. Please login first.');",
                  "    return false;",
                  "}",
                  "",
                  "// Generate unique device ID for test",
                  "const deviceId = 'test-device-' + Date.now();",
                  "pm.environment.set('TEST_DEVICE_ID', deviceId);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deviceId\": \"{{TEST_DEVICE_ID}}\",\n  \"deviceName\": \"Test Desktop App\",\n  \"platform\": \"test\",\n  \"deviceType\": \"desktop\",\n  \"appVersion\": \"1.0.0-test\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/token-exchange/initiate",
              "host": ["{{API_BASE_URL}}"],
              "path": ["token-exchange", "initiate"]
            },
            "description": "Test complete desktop authentication flow"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Global setup for all requests",
          "pm.request.headers.add({",
          "    key: 'User-Agent',",
          "    value: 'JobSwipe-Postman-Tests/1.0.0'",
          "});",
          "",
          "// Log request details for debugging",
          "console.log(`üöÄ ${pm.request.method} ${pm.request.url.toString()}`);",
          "",
          "// Set common variables if not set",
          "if (!pm.environment.get('API_BASE_URL')) {",
          "    pm.environment.set('API_BASE_URL', 'http://localhost:3001');",
          "}",
          "if (!pm.environment.get('WEB_BASE_URL')) {",
          "    pm.environment.set('WEB_BASE_URL', 'http://localhost:3000');",
          "}"
        ],
        "type": "text/javascript"
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// Global response validation",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper headers', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Log response status",
          "const status = pm.response.code;",
          "const method = pm.request.method;",
          "const url = pm.request.url.toString();",
          "",
          "if (status >= 200 && status < 300) {",
          "    console.log(`‚úÖ ${method} ${url} - ${status}`);",
          "} else if (status >= 400) {",
          "    console.log(`‚ùå ${method} ${url} - ${status}`);",
          "    ",
          "    // Log error details",
          "    try {",
          "        const errorData = pm.response.json();",
          "        console.log('Error:', errorData.error || errorData.message);",
          "    } catch (e) {",
          "        console.log('Error parsing response body');",
          "    }",
          "} else {",
          "    console.log(`‚ö†Ô∏è ${method} ${url} - ${status}`);",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ]
}