# =============================================================================
# JobSwipe Enterprise Platform - Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string
DATABASE_URL="postgresql://jobswipe:jobswipe_dev_password@localhost:5432/jobswipe_dev"

# Database connection pool settings
DATABASE_MAX_CONNECTIONS=10
DATABASE_CONNECTION_TIMEOUT=30000

# =============================================================================
# Redis Configuration  
# =============================================================================
# Redis connection for caching and queues
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB=0

# =============================================================================
# Authentication & Security
# =============================================================================
# JWT Secret (generate with: openssl rand -base64 32)
JWT_SECRET="your_super_secret_jwt_key_here_change_in_production"
JWT_EXPIRES_IN="1h"
JWT_REFRESH_EXPIRES_IN="7d"

# NextAuth.js configuration
NEXTAUTH_SECRET="your_nextauth_secret_here_change_in_production"
NEXTAUTH_URL="http://localhost:3000"

# Password hashing rounds (10-12 recommended)
BCRYPT_ROUNDS=12

# Session configuration
SESSION_TIMEOUT=3600000
SESSION_COOKIE_NAME="jobswipe_session"

# =============================================================================
# Feature Flags
# =============================================================================
# Use unified authentication system (set to 'true' to enable, 'false' for legacy)
# IMPORTANT: Test thoroughly in staging before enabling in production
USE_UNIFIED_AUTH="false"  # Default: false (use legacy auth.routes.ts)
                          # Set to "true" to use auth.unified.routes.ts with:
                          #   - Account lockout protection
                          #   - Email verification
                          #   - Enhanced security features

# =============================================================================
# AWS Services Configuration
# =============================================================================
# AWS credentials for S3 file storage
AWS_ACCESS_KEY_ID="your_aws_access_key"
AWS_SECRET_ACCESS_KEY="your_aws_secret_key"
AWS_REGION="us-east-1"

# S3 bucket configuration
S3_BUCKET_NAME="jobswipe-uploads"
S3_BUCKET_REGION="us-east-1"
S3_PRESIGNED_URL_EXPIRY=3600

# CloudFront CDN (optional)
CLOUDFRONT_DOMAIN=""

# =============================================================================
# File Upload Configuration
# =============================================================================
# Maximum file sizes (in bytes)
MAX_RESUME_SIZE=10485760
MAX_PROFILE_IMAGE_SIZE=5242880

# Allowed file types
ALLOWED_RESUME_TYPES="pdf,doc,docx"
ALLOWED_IMAGE_TYPES="jpg,jpeg,png,webp"

# =============================================================================
# Resume Processing Configuration (NEW)
# =============================================================================
# Google Gemini AI for resume structuring
GOOGLE_API_KEY=""
GEMINI_API_KEY=""
GEMINI_MODEL="gemini-2.0-flash-exp"

# Resume processing limits
MAX_RESUME_PAGES=10
MAX_RESUME_PARSE_TIME=30000       # 30 seconds
ENABLE_RESUME_METADATA=true        # RMS metadata embedding

# S3 Resume-specific configuration
S3_RESUME_FOLDER="resumes"
S3_RESUME_PUBLIC_READ=false

# Resume enhancement
ENABLE_AI_ENHANCEMENT=true
AI_ENHANCEMENT_TIMEOUT=60000       # 60 seconds

# =============================================================================
# Email Configuration
# =============================================================================
# SMTP settings for transactional emails
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your_email@gmail.com"
SMTP_PASS="your_app_password"

# Email addresses
FROM_EMAIL="noreply@jobswipe.com"
SUPPORT_EMAIL="support@jobswipe.com"

# For development: Use Mailhog
# SMTP_HOST="localhost"
# SMTP_PORT=1025
# SMTP_SECURE=false

# =============================================================================
# Browser Automation Configuration
# =============================================================================
# Browser automation settings
BROWSER_HEADLESS=true
BROWSER_TIMEOUT=30000
BROWSER_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"

# Captcha handling
CAPTCHA_TIMEOUT=300000
CAPTCHA_RETRY_ATTEMPTS=3

# Job application automation
APPLICATION_DELAY_MIN=2000
APPLICATION_DELAY_MAX=5000
MAX_APPLICATIONS_PER_HOUR=10

# =============================================================================
# API Configuration
# =============================================================================
# API server settings
API_PORT=3001
API_HOST="localhost"
API_CORS_ORIGIN="http://localhost:3000"

# Rate limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100

# API versioning
API_VERSION="v1"
API_PREFIX="/api/v1"

# =============================================================================
# Application Environment
# =============================================================================
# Environment (development, staging, production)
NODE_ENV="development"

# Application URLs
WEB_APP_URL="http://localhost:3000"
API_BASE_URL="http://localhost:3001"
DESKTOP_APP_VERSION="1.0.0"

# Feature flags
ENABLE_ANALYTICS=false
ENABLE_ERROR_TRACKING=false
ENABLE_PERFORMANCE_MONITORING=false

# =============================================================================
# Third-party Integrations
# =============================================================================
# Analytics (PostHog)
POSTHOG_KEY=""
POSTHOG_HOST="https://app.posthog.com"

# Error tracking (Sentry)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# Performance monitoring (DataDog)
DATADOG_API_KEY=""
DATADOG_APP_KEY=""

# =============================================================================
# Logging Configuration
# =============================================================================
# Log levels: error, warn, info, debug
LOG_LEVEL="info"
LOG_FORMAT="json"

# Log file configuration
LOG_FILE_ENABLED=true
LOG_FILE_PATH="./logs/app.log"
LOG_FILE_MAX_SIZE="10m"
LOG_FILE_MAX_FILES=5

# =============================================================================
# Development Tools
# =============================================================================
# Database GUI tools
PGADMIN_EMAIL="admin@jobswipe.dev"
PGADMIN_PASSWORD="admin123"

# Redis GUI
REDIS_COMMANDER_USER="admin"
REDIS_COMMANDER_PASS="admin123"

# MinIO (S3-compatible storage for development)
MINIO_ROOT_USER="minioadmin"
MINIO_ROOT_PASSWORD="minioadmin123"
MINIO_ENDPOINT="http://localhost:9000"

# =============================================================================
# Security Configuration
# =============================================================================
# CORS settings
CORS_ENABLED=true
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Security headers
HELMET_ENABLED=true
CONTENT_SECURITY_POLICY_ENABLED=true

# Encryption keys (generate with: openssl rand -hex 32)
ENCRYPTION_KEY="your_32_character_encryption_key_here"
ENCRYPTION_ALGORITHM="aes-256-gcm"

# =============================================================================
# Queue Configuration
# =============================================================================
# BullMQ job queue settings
QUEUE_REDIS_URL="redis://localhost:6379"
QUEUE_DEFAULT_JOB_OPTIONS='{"removeOnComplete":10,"removeOnFail":5}'

# Job processing
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT=300000
JOB_RETRY_ATTEMPTS=3

# =============================================================================
# Monitoring & Health Checks
# =============================================================================
# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT="/health"

# Metrics collection
METRICS_ENABLED=true
METRICS_ENDPOINT="/metrics"

# =============================================================================
# Compliance & Privacy
# =============================================================================
# GDPR compliance
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555
COOKIE_CONSENT_REQUIRED=true

# Privacy settings
ANONYMOUS_ANALYTICS=true
IP_ANONYMIZATION=true

# =============================================================================
# IMPORTANT SECURITY NOTES
# =============================================================================
# 1. Change all default passwords and secrets before production
# 2. Use environment-specific values for each deployment
# 3. Enable proper access controls on AWS resources
# 4. Use AWS IAM roles instead of access keys when possible
# 5. Enable audit logging for all sensitive operations
# 6. Regular security audits and dependency updates required